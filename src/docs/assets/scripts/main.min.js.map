{"version":3,"sources":["main.js"],"names":["$","window","document","undefined","main","$main","populateDemo","$container","i","$items","find","prepend","append","tooltip","on","e","this","attr","length","css","each","k","$item","name","eq","id","clipboard","Clipboard","target","trigger","parents","clearSelection","$iframe","initIframe","addClass","populateIframe","resizeIframe","contentWindow","init","setTimeout","obj","populateInline","$sources","z","$source","populateSources","hasClass","xtToggle","elements","targets","min","html","scss","js","lang","data","$codeInside","text","formatCode","replace","removeClass","hljs","highlightBlock","$clone","clone","match","remove","developerInit","developer","$target","contents","hide","show","h","height","$demo","$fullscreen","iframe","off","open","wrapInner","filter","$element","toLowerCase","is","last","scrollTop","$elements","href","top","offset","bottom","Infinity","not","$subs","$data","xtInitAll","xtAjax","ready","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":[";( function($, window, document, undefined) {\r\n  \r\n  'use strict';\r\n  \r\n  var main = function($main) {\r\n    \r\n    //////////////////////\r\n    // demo\r\n    //////////////////////\r\n    \r\n    window.resizeIframe = function(id) {\r\n      var $iframe = $('#' + id);\r\n      var $target = $iframe.contents().find('#body-inside');\n      $target.hide().show(0); // fix scrollbars disappearing\r\n      var h = $target.height();\r\n      if (h !== $iframe.data('iframeHeight')) {\r\n        $iframe.height(h);\r\n        $iframe.data('iframeHeight', h);\r\n      }\r\n    };\r\n    \r\n    // populateDemo\r\n    function populateDemo($container, i) {\r\n      var $items = $container.find('> .demo-item');\r\n      // multiple elements\r\n      $container.prepend('<div class=\"box demo-tabs\"><div class=\"box demo-tabs-inside\"><div class=\"demo-tabs-left float-left\"></div><div class=\"demo-code-tabs-right float-right\"></div></div></div>');\r\n      $container.find('.demo-code-tabs-right').append('<button class=\"button button__fullscreen\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Open fullscreen\"><span class=\"icon-enlarge2\"></span></button>');\r\n      $container.find('.button__fullscreen').tooltip(/*{trigger: 'click'}*/)\r\n        .on('mouseleave', function(e) {\r\n          $(this).attr('data-original-title', 'Open fullscreen').tooltip('hide');\r\n        });\r\n      // single element and no demo tabs\r\n      if ($items.length === 1/* && !$items.hasClass('demo-preview') && !$items.attr('data-iframe')*/) {\r\n        $items.css('display', 'block');\r\n        $container.find('.demo-tabs').css('display', 'none');\r\n      }\r\n      $items.each( function(k) {\r\n        var $item = $(this);\r\n        // populate tabs\r\n        var name = $item.attr('data-name');\r\n        if ($items.length === 1) {\r\n          if (!$item.attr('data-name')) {\r\n            name = 'demo';\r\n          }\r\n        } else {\r\n          if (!$item.attr('data-name')) {\r\n            name = 'demo #' + k;\r\n          }\r\n        }\r\n        var $btn = $container.find('.demo-tabs-left').append('<button class=\"button\">' + name + '</button>').find('.button').eq(k);\r\n        // iframe append\r\n        if ($item.attr('data-iframe')) {\r\n          $item.append('<iframe data-src=\"' + $item.attr('data-iframe') + '\" frameborder=\"0\"></iframe>');\n        }\r\n        // tabs\r\n        var id = 'iframe' + i + k;\r\n        $item.append('<div class=\"demo-code\"><div class=\"box demo-code-tabs\"><div class=\"box demo-code-tabs-inside\"><div class=\"demo-code-tabs-left float-left\"></div><div class=\"demo-code-tabs-right float-right\"><button class=\"button button__clipboard\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Copy to clipboard\">copy</button></div></div></div><div class=\"box demo-code-body\"></div></div>');\r\n        // https://github.com/zenorocha/clipboard.js/\r\n        $item.find('.button__clipboard').tooltip(/*{trigger: 'click'}*/)\r\n          .on('mouseleave', function(e) {\r\n            $(this).attr('data-original-title', 'Copy to clipboard').tooltip('hide');\r\n          });\r\n        var clipboard = new Clipboard('.button__clipboard', {\r\n          target: function(trigger) {\n            return $(trigger).parents('.demo').find('.demo-item.active .demo-code-body-item.active .hljs')[0];\r\n          }\r\n        });\r\n        clipboard.on('success', function(e) {\r\n          e.clearSelection();\r\n          $(e.trigger).attr('data-original-title', 'Done').tooltip('show');\r\n        });\r\n        clipboard.on('error', function(e) {\r\n          $(e.trigger).attr('data-original-title', 'Error: copy manually').tooltip('show');\r\n        });\r\n        // inject iframe\r\n        if ($item.attr('data-iframe')) {\r\n          var $iframe = $item.find('> iframe');\r\n          var initIframe = function() {\r\n            if (!$iframe.attr('src')) {\r\n              $item.addClass('demo-iframe');\r\n              $iframe.attr('id', id);\r\n              $iframe.attr('src', $iframe.attr('data-src'));\r\n              $iframe.on('load', function(e){\r\n                populateIframe($item, $iframe, id);\r\n                window.resizeIframe(id);\r\n                $iframe[0].contentWindow.init();\r\n                // .populated fix scroll\r\n                setTimeout( function($item) {\r\n                  $item.addClass('populated');\r\n                }, 0, $item);\r\n              });\r\n            }\r\n          };\r\n          if (k === 0) {\r\n            initIframe();\r\n          }\r\n          // iframe resize on show\r\n          $item.on('show.xt', function(e, obj) {\r\n            if (e.target === this) {\r\n              window.resizeIframe(id);\r\n              if (k !== 0) {\r\n                initIframe();\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          populateInline($item, id);\r\n          // .populated fix scroll\r\n          setTimeout( function($item) {\r\n            $item.addClass('populated');\r\n          }, 0, $item);\r\n        }\r\n      });\r\n    }\r\n    \r\n    // populateInline\r\n    function populateInline($item, id) {\r\n      var $sources = $item.find('> .demo-source');\r\n      $sources.each( function(z) {\r\n        var $source = $(this);\r\n        populateSources($item, $source, id, z);\r\n        if (!$item.hasClass('demo-preview')) {\r\n          $source.css('display', 'none');\r\n        }\r\n      });\r\n      $item.xtToggle({\"elements\": \".demo-code-tabs-left .button\", \"targets\": \".demo-code-body-item\", \"min\": 1});\r\n    }\r\n    \r\n    // populateIframe\r\n    function populateIframe($item, $iframe, id) {\r\n      var html = $('body #body-inside', $iframe[0].contentWindow.document).html();\r\n      var scss = $('body scss-style', $iframe[0].contentWindow.document).html();\r\n      var css = $('body style[scoped]', $iframe[0].contentWindow.document).html();\r\n      var js = $('body script', $iframe[0].contentWindow.document).html();\r\n      // inject code\r\n      if (html) {\r\n        $iframe.append('<div class=\"demo-source\" data-lang=\"html\">' + html + '</div>');\r\n      }\r\n      if (scss) {\r\n        $iframe.append('<div class=\"demo-source\" data-lang=\"scss\">' + scss + '</div>');\r\n      }\r\n      if (js) {\r\n        $iframe.append('<div class=\"demo-source\" data-lang=\"js\">' + js + '</div>');\r\n      }\r\n      // populate\r\n      var $sources = $item.find('.demo-source');\r\n      $sources.each( function(z) {\r\n        var $source = $(this);\r\n        populateSources($item, $source, id, z);\r\n      });\r\n      $item.xtToggle({\"elements\": \".demo-code-tabs-left .button\", \"targets\": \".demo-code-body-item\", \"min\": 1});\r\n    }\r\n    \r\n    // populateSources\r\n    function populateSources($item, $source, id, z) {\r\n      var lang = $source.data('lang');\r\n      // populate tabs\r\n      var $codeInside = $item.find('.demo-code-body').append('<div class=\"demo-code-body-item\"><pre><code></code></pre></div>').find('.demo-code-body-item').eq(z).find('pre code');\r\n      var $btnInside = $item.find('.demo-code-tabs-left').append('<button class=\"button\">' + lang + '</button>').find('.button').eq(z);\r\n      // format code\r\n      if (!$codeInside.hasClass('hljs')) {\r\n        var text = formatCode($source, lang);\r\n        text = text.replace(/^\\s+|\\s+$/g, ''); // remove newline at start and end\r\n        $codeInside.html(text).removeClass().addClass(lang);\r\n        window.hljs.highlightBlock($codeInside[0]);\r\n      }\r\n    }\r\n    \r\n    // formatCode\r\n    function formatCode($source, lang) {\r\n      var $clone = $source.clone();\r\n      var text = $clone.html();\r\n      if (lang === 'css' || lang === 'js') {\r\n        text = text.replace(/<[^>]*>/g, '');\r\n      }\r\n      if (text.match(/[&<>]/g)) {\r\n        // replace entities\r\n        text = text.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g, '>');\r\n        // replace json quotes\r\n        text = text.replace(/(\"{)/g, '\\'{').replace(/(}\")/g, '}\\'');\r\n        // replace quote entities \r\n        text = text.replace(/&quot;:/g,'&quot;:'); // add spacing for white-space: pre-wrap;\r\n        text = text.replace(/&quot;/g,'\"');\r\n      }\r\n      text = $clone.text(text).html();\r\n      $clone.remove();\r\n      return text;\r\n    }\r\n    \r\n    // init demo\r\n    $main.find('.demo').each( function(i) {\r\n      var $demo = $(this);\r\n      populateDemo($demo, i);\r\n      // enable fullscreen\r\n      $demo.find('.demo-tabs-left .button').on('show.xt', function(e, obj) {\r\n        var $fullscreen = $(this).parents('.demo').find('.button__fullscreen');\r\n        var iframe = $(this).parents('.demo').find('.demo-item.active').attr('data-iframe');\r\n        if (iframe) {\r\n          $fullscreen.css('display', 'block');\r\n          $fullscreen.off('click');\r\n          $fullscreen.on('click', function() {\r\n            window.open(iframe, '_blank');\r\n          });\r\n        } else {\r\n          $fullscreen.css('display', 'none');\r\n        }\r\n      });\r\n      // demo tabs\r\n      $demo.xtToggle({\"elements\":\".demo-tabs-left .button\", \"targets\": \".demo-item\", \"min\": 1});\r\n    });\r\n    \r\n    //////////////////////\r\n    // others\r\n    //////////////////////\r\n\r\n    // syntax\r\n    $main.find('pre code').each( function(i) {\r\n      window.hljs.highlightBlock(this);\r\n    });\r\n    \r\n    // .site-article .make-line\r\n    $main.find('.site-article').find('> h2, > h3').addClass('make-line');\r\n    $main.find('.make-line').wrapInner('<span class=\"line\"></span>').wrapInner('<div class=\"line-container\"></div>');\r\n    \r\n    // .site-article .site-article-anchor\r\n    $main.find('.site-article').find('> h2, > h3').filter(':parents(.demo)').each( function(i) {\r\n      var $element = $(this);\r\n      var id = $element.text().replace(/\\s+/g, '-').toLowerCase();\r\n      $element.attr('id', id);\r\n      $element.wrapInner('<a href=\"#' + id + '\"></a>');\r\n      $element.addClass('make-anchor').append('<span class=\"site-article-anchor\"><div class=\"button\"><span class=\"icon-link\" aria-hidden=\"true\"></span></div></span>');\r\n    });\r\n    \r\n    // tooltips\r\n    $main.find('[data-toggle=\"tooltip\"]').tooltip(/*{trigger: 'click'}*/);\r\n    \r\n    // .site-aside-text\r\n    $main.find('.site-aside-text > .button:not(.different)').each( function(i) {\r\n      var $container = $(this).parents('.site-aside-text');\r\n      $main.find('.site-article').find('> h2, > h3').each( function(z) {\r\n        var $element = $(this);\r\n        if ($(this).is('h2')) {\r\n          $container.append($('<a href=\"#' + $(this).attr('id') + '\" class=\"button site-aside-sub\">' + $(this).text() + '</a><div class=\"site-aside-subsub\"></div>'));\r\n        } else if ($(this).is('h3')) {\r\n          $container.find('.site-aside-subsub').last().append($('<a href=\"#' + $(this).attr('id') + '\" class=\"button\">' + $(this).text() + '</a>'));\r\n        }\r\n      });\r\n    });\r\n    $(window).off('scroll.aside').on('scroll.aside', function() {\r\n      var scrollTop = $(this).scrollTop() + 60;\r\n      var $elements = $('.button.site-aside-sub').filter(':parents(.xt-ignore)');\r\n      $elements.each( function(i) {\r\n        var $element = $(this);\r\n        var href = $(this).attr('href');\r\n        if (href) {\r\n          var $target = $(href);\r\n          var top = $target.offset().top;\r\n          var bottom = Infinity;\r\n          if (scrollTop >= top && scrollTop < bottom) {\r\n            if (!$element.hasClass('active')) {\r\n              $elements.not($element).removeClass('active');\r\n              $element.addClass('active');\r\n            }\r\n          } else {\r\n            if ($element.hasClass('active')) {\r\n              $element.removeClass('active');\r\n            }\r\n          }\r\n        }\r\n      });\r\n      var $subs = $('.button.site-aside-sub.active + .site-aside-subsub .button').filter(':parents(.xt-ignore)');\r\n      $subs.each( function(i) {\r\n        var $element = $(this);\r\n        var href = $(this).attr('href');\r\n        if (href) {\r\n          var $target = $(href);\r\n          var top = $target.offset().top;\r\n          var bottom = Infinity;\r\n          if (scrollTop >= top && scrollTop <= bottom) {\r\n            if (!$element.hasClass('active')) {\r\n              $subs.not($element).removeClass('active');\r\n              $element.addClass('active');\r\n            }\r\n          } else {\r\n            if ($element.hasClass('active')) {\r\n              $element.removeClass('active');\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n    \r\n    //////////////////////\r\n    // developer\r\n    //////////////////////\r\n    \r\n    window.developer = false;\r\n    function developerInit() {\r\n      // state\r\n      if (window.developer) {\r\n        $('.button__developer').addClass('active');\r\n        $('.developer').addClass('developer-show');\r\n      }\r\n      // init\r\n      $('.button__developer').xtToggle().on('show.xt', function(e) {\r\n        window.developer = true;\r\n        $('.developer').addClass('developer-show');\r\n      }).on('hide.xt', function(e) {\r\n        window.developer = false;\r\n        $('.developer').removeClass('developer-show');\r\n      });\r\n    }\r\n    $main.find('.site-wrapper').on('ajax.populated.xt', function(e, obj, $data) {\r\n      developerInit();\r\n    });\r\n    developerInit();\r\n    \r\n  };\r\n  \r\n  // init main\r\n  \r\n  main($('body'));\r\n  \r\n  //////////////////////\r\n  // xtend\r\n  //////////////////////\r\n  \r\n  // init xt\r\n  $('body').xtInitAll(true);\r\n  $('body').xtAjax({'elements': 'a[href^=\"/\"]', 'targets': '.site-wrapper'});\r\n  \r\n  // xt-ajax\r\n  $('.site-wrapper').on('ajax.populated.xt', function(e, obj, $data) {\r\n    // custom function on ajax\r\n    main($(this));\r\n  });\r\n  \r\n  /*\r\n  // test ajax stop page from changing\r\n  function unloadPage(){\r\n   return false;\r\n  }\r\n  window.onbeforeunload = unloadPage;\r\n  */\r\n  /*\r\n  $('.button__menu').filter(':parents(.xt-ignore)').on('show.xt', function(e, obj, triggered, isSync) {\r\n    console.log(triggered, $('.button__menu').filter(':parents(.xt-ignore)').length, $('.button__menu').filter(':parents(.xt-ignore)').not(this).length);\r\n    if (!triggered && e.target === this) {\r\n      $('.button__menu').filter(':parents(.xt-ignore)').not(this).trigger('show.xt', [true, true]);\r\n    }\r\n  });\r\n  */\r\n  /*\r\n  $('.button__menu').on('hide.xt', function(e) {\r\n    $('.button__menu').not(this).trigger('hide.xt', [true]);\r\n  });\r\n  */\r\n  \r\n  /*\r\n  // tests\r\n  $('button').on('show.xt', function(e, obj, $data) {\r\n    console.log($(this));\r\n  });\r\n  */\r\n  // tests\n  $(document).ready( function() {\r\n    //$('.site-breadcrumbs-body-main').trigger('show.xt');\r\n    //$('a[href=\"/\"]').filter(':parents(.xt-ignore)').trigger('show.xt');\r\n    //if ($('html').atr('id') === 'test-0.html') { console.log(this.settings); }\r\n    //$('.demo-item').on('show.xt', function(e, obj) { console.log($(e.target)); });\r\n  });\r\n  \r\n  \r\n})(jQuery, window, document);"]}
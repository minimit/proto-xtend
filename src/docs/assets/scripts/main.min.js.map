{"version":3,"sources":["main.js"],"names":["$","window","document","undefined","main","$main","populateDemo","$container","i","$items","find","prepend","append","length","css","each","k","$item","this","name","attr","eq","id","clipboard","Clipboard","target","trigger","parents","on","e","clearSelection","$iframe","initIframe","addClass","populateIframe","resizeIframe","contentWindow","init","setTimeout","obj","populateInline","$sources","z","$source","populateSources","hasClass","xtToggle","elements","targets","min","html","less","js","lang","data","$codeInside","text","formatCode","replace","removeClass","hljs","highlightBlock","$clone","clone","match","remove","developerInit","developer","$target","contents","hide","show","h","height","$demo","$fullscreen","iframe","off","open","wrapInner","filter","$element","toLowerCase","is","last","scrollTop","$elements","href","top","offset","bottom","Infinity","not","$subs","$data","xtInitAll","xtAjax","ready","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":[";( function($, window, document, undefined) {\n  \n  'use strict';\n  \n  var main = function($main) {\n    \n    //////////////////////\n    // demo\n    //////////////////////\n    \n    window.resizeIframe = function(id) {\n      var $iframe = $('#' + id);\n      var $target = $iframe.contents().find('#body-inside');\n      $target.hide().show(0); // fix scrollbars disappearing\n      var h = $target.height();\n      if (h !== $iframe.data('iframeHeight')) {\n        $iframe.height(h);\n        $iframe.data('iframeHeight', h);\n      }\n    };\n    \n    // populateDemo\n    function populateDemo($container, i) {\n      var $items = $container.find('> .demo-item');\n      // multiple elements\n      $container.prepend('<div class=\"demo-tabs\"><div class=\"demo-tabs-inside\"><div class=\"demo-tabs-left float-left\"></div><div class=\"demo-tabs-right float-right\"></div></div></div>');\n      $container.find('.demo-tabs-right').append('<button type=\"button\" class=\"button button__fullscreen\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Open fullscreen\"><span class=\"icon-enlarge2\"></span></button>');\n      /*\n      $container.find('.button__fullscreen'))\n        .on('mouseleave', function(e) {\n          $(this).attr('data-original-title', 'Open fullscreen').tooltip('hide');\n        });\n      */\n      // single element and no demo tabs\n      if ($items.length === 1/* && !$items.hasClass('demo-preview') && !$items.attr('data-iframe')*/) {\n        $items.css('display', 'block');\n        $container.find('.demo-tabs').css('display', 'none');\n      }\n      $items.each( function(k) {\n        var $item = $(this);\n        // populate tabs\n        var name = $item.attr('data-name');\n        if ($items.length === 1) {\n          if (!$item.attr('data-name')) {\n            name = 'demo';\n          }\n        } else {\n          if (!$item.attr('data-name')) {\n            name = 'demo #' + k;\n          }\n        }\n        var $btn = $container.find('.demo-tabs-left').append('<button type=\"button\" class=\"button\">' + name + '</button>').find('.button').eq(k);\n        // iframe append\n        if ($item.attr('data-iframe')) {\n          $item.append('<iframe data-src=\"' + $item.attr('data-iframe') + '\" frameborder=\"0\"></iframe>');\n        }\n        // tabs\n        var id = 'iframe' + i + k;\n        $item.append('<div class=\"demo-code\"><div class=\"demo-code-tabs\"><div class=\"demo-code-tabs-inside\"><div class=\"demo-code-tabs-left float-left\"></div><div class=\"demo-code-tabs-right float-right\"><button type=\"button\" class=\"button button__clipboard\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Copy to clipboard\">copy</button></div></div></div><div class=\"demo-code-body\"></div></div>');\n        // https://github.com/zenorocha/clipboard.js/\n        /*\n        $item.find('.button__clipboard').tooltip()\n          .on('mouseleave', function(e) {\n            $(this).attr('data-original-title', 'Copy to clipboard').tooltip('hide');\n          });\n        */\n        var clipboard = new Clipboard('.button__clipboard', {\n          target: function(trigger) {\n            return $(trigger).parents('.demo').find('.demo-item.active .demo-code-body-item.active .hljs')[0];\n          }\n        });\n        clipboard.on('success', function(e) {\n          e.clearSelection();\n          //$(e.trigger).attr('data-original-title', 'Done').tooltip('show');\n        });\n        clipboard.on('error', function(e) {\n          //$(e.trigger).attr('data-original-title', 'Error: copy manually').tooltip('show');\n        });\n        // inject iframe\n        if ($item.attr('data-iframe')) {\n          var $iframe = $item.find('> iframe');\n          var initIframe = function() {\n            if (!$iframe.attr('src')) {\n              $item.addClass('demo-iframe');\n              $iframe.attr('id', id);\n              $iframe.attr('src', $iframe.attr('data-src'));\n              $iframe.on('load', function(e){\n                populateIframe($item, $iframe, id);\n                window.resizeIframe(id);\n                $iframe[0].contentWindow.init();\n                // .populated fix scroll\n                setTimeout( function($item) {\n                  $item.addClass('populated');\n                }, 0, $item);\n              });\n            }\n          };\n          if (k === 0) {\n            initIframe();\n          }\n          // iframe resize on show\n          $item.on('on', function(e, obj) {\n            if (e.target === this) {\n              window.resizeIframe(id);\n              if (k !== 0) {\n                initIframe();\n              }\n            }\n          });\n        } else {\n          populateInline($item, id);\n          // .populated fix scroll\n          setTimeout( function($item) {\n            $item.addClass('populated');\n          }, 0, $item);\n        }\n      });\n    }\n    \n    // populateInline\n    function populateInline($item, id) {\n      var $sources = $item.find('> .demo-source');\n      $sources.each( function(z) {\n        var $source = $(this);\n        populateSources($item, $source, id, z);\n        if (!$item.hasClass('demo-preview')) {\n          $source.css('display', 'none');\n        }\n      });\n      $item.xtToggle({\"elements\": \".demo-code-tabs-left .button\", \"targets\": \".demo-code-body-item\", \"min\": 1});\n    }\n    \n    // populateIframe\n    function populateIframe($item, $iframe, id) {\n      var html = $('body #body-inside', $iframe[0].contentWindow.document).html();\n      var less = $('body less-style', $iframe[0].contentWindow.document).html();\n      var css = $('body style[scoped]', $iframe[0].contentWindow.document).html();\n      var js = $('body script', $iframe[0].contentWindow.document).html();\n      // inject code\n      if (html) {\n        $iframe.append('<div class=\"demo-source\" data-lang=\"html\">' + html + '</div>');\n      }\n      if (less) {\n        $iframe.append('<div class=\"demo-source\" data-lang=\"less\">' + less + '</div>');\n      }\n      if (js) {\n        $iframe.append('<div class=\"demo-source\" data-lang=\"js\">' + js + '</div>');\n      }\n      // populate\n      var $sources = $item.find('.demo-source');\n      $sources.each( function(z) {\n        var $source = $(this);\n        populateSources($item, $source, id, z);\n      });\n      $item.xtToggle({\"elements\": \".demo-code-tabs-left .button\", \"targets\": \".demo-code-body-item\", \"min\": 1});\n    }\n    \n    // populateSources\n    function populateSources($item, $source, id, z) {\n      var lang = $source.data('lang');\n      // populate tabs\n      var $codeInside = $item.find('.demo-code-body').append('<div class=\"demo-code-body-item\"><pre><code></code></pre></div>').find('.demo-code-body-item').eq(z).find('pre code');\n      var $btnInside = $item.find('.demo-code-tabs-left').append('<button type=\"button\" class=\"button\">' + lang + '</button>').find('.button').eq(z);\n      // format code\n      if (!$codeInside.hasClass('hljs')) {\n        var text = formatCode($source, lang);\n        text = text.replace(/^\\s+|\\s+$/g, ''); // remove newline at start and end\n        $codeInside.html(text).removeClass().addClass(lang);\n        window.hljs.highlightBlock($codeInside[0]);\n      }\n    }\n    \n    // formatCode\n    function formatCode($source, lang) {\n      var $clone = $source.clone();\n      var text = $clone.html();\n      if (lang === 'css' || lang === 'js') {\n        text = text.replace(/<[^>]*>/g, '');\n      }\n      if (text.match(/[&<>]/g)) {\n        // replace entities\n        text = text.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g, '>');\n        // replace json quotes\n        text = text.replace(/(\"{)/g, '\\'{').replace(/(}\")/g, '}\\'');\n        // replace quote entities \n        text = text.replace(/&quot;:/g, '&quot;:'); // add spacing for white-space: pre-wrap;\n        text = text.replace(/&quot;/g, '\"');\n        // replace empty quotes\n        text = text.replace(/=\"\"/g, '');\n      }\n      text = $clone.text(text).html();\n      $clone.remove();\n      return text;\n    }\n    \n    // init demo\n    $main.find('.demo').each( function(i) {\n      var $demo = $(this);\n      populateDemo($demo, i);\n      // enable fullscreen\n      $demo.find('.demo-tabs-left .button').on('on', function(e, obj) {\n        var $fullscreen = $(this).parents('.demo').find('.button__fullscreen');\n        var iframe = $(this).parents('.demo').find('.demo-item.active').attr('data-iframe');\n        if (iframe) {\n          $fullscreen.css('display', 'block');\n          $fullscreen.off('click');\n          $fullscreen.on('click', function() {\n            window.open(iframe, '_blank');\n          });\n        }\n      });\n      // demo tabs\n      $demo.xtToggle({\"elements\":\".demo-tabs-left .button\", \"targets\": \".demo-item\", \"min\": 1});\n    });\n    \n    //////////////////////\n    // others\n    //////////////////////\n\n    // syntax\n    $main.find('pre code').each( function(i) {\n      window.hljs.highlightBlock(this);\n    });\n    \n    // .site-article .make-line\n    $main.find('.site-article').find('> h2, > h3').addClass('make-line');\n    $main.find('.make-line').wrapInner('<span class=\"line\"></span>').wrapInner('<div class=\"line-container\"></div>');\n    \n    // .site-article .site-article-anchor\n    $main.find('.site-article').find('> h2, > h3').filter(':parents(.demo)').each( function(i) {\n      var $element = $(this);\n      var id = $element.text().replace(/\\s+/g, '-').toLowerCase();\n      $element.attr('id', id);\n      $element.wrapInner('<a href=\"#' + id + '\"></a>');\n      $element.addClass('make-anchor').append('<span class=\"site-article-anchor\"><div class=\"button\"><span class=\"icon-link\" aria-hidden=\"true\"></span></div></span>');\n    });\n    \n    // tooltips\n    //$main.find('[data-toggle=\"tooltip\"]').tooltip(/*{trigger: 'click'}*/);\n    \n    // .site-aside-text\n    $main.find('.site-aside-text > .button:not(.different)').each( function(i) {\n      var $container = $(this).parents('.site-aside-text');\n      $main.find('.site-article').find('> h2, > h3').each( function(z) {\n        var $element = $(this);\n        if ($(this).is('h2')) {\n          $container.append($('<a href=\"#' + $(this).attr('id') + '\" class=\"button site-aside-sub\">' + $(this).text() + '</a><div class=\"site-aside-subsub\"></div>'));\n        } else if ($(this).is('h3')) {\n          $container.find('.site-aside-subsub').last().append($('<a href=\"#' + $(this).attr('id') + '\" class=\"button\">' + $(this).text() + '</a>'));\n        }\n      });\n    });\n    $(window).off('scroll.aside').on('scroll.aside', function() {\n      var scrollTop = $(this).scrollTop() + 60;\n      var $elements = $('.button.site-aside-sub').filter(':parents(.xt-ignore)');\n      $elements.each( function(i) {\n        var $element = $(this);\n        var href = $(this).attr('href');\n        if (href) {\n          var $target = $(href);\n          var top = $target.offset().top;\n          var bottom = Infinity;\n          if (scrollTop >= top && scrollTop < bottom) {\n            if (!$element.hasClass('active')) {\n              $elements.not($element).removeClass('active');\n              $element.addClass('active');\n            }\n          } else {\n            if ($element.hasClass('active')) {\n              $element.removeClass('active');\n            }\n          }\n        }\n      });\n      var $subs = $('.button.site-aside-sub.active + .site-aside-subsub .button').filter(':parents(.xt-ignore)');\n      $subs.each( function(i) {\n        var $element = $(this);\n        var href = $(this).attr('href');\n        if (href) {\n          var $target = $(href);\n          var top = $target.offset().top;\n          var bottom = Infinity;\n          if (scrollTop >= top && scrollTop <= bottom) {\n            if (!$element.hasClass('active')) {\n              $subs.not($element).removeClass('active');\n              $element.addClass('active');\n            }\n          } else {\n            if ($element.hasClass('active')) {\n              $element.removeClass('active');\n            }\n          }\n        }\n      });\n    });\n    \n    //////////////////////\n    // developer\n    //////////////////////\n    \n    window.developer = false;\n    function developerInit() {\n      // state\n      if (window.developer) {\n        $('.button__developer').addClass('active');\n        $('.developer').addClass('developer-show');\n      }\n      // init\n      $('.button__developer').xtToggle().on('on', function(e) {\n        window.developer = true;\n        $('.developer').addClass('developer-show');\n      }).on('off', function(e) {\n        window.developer = false;\n        $('.developer').removeClass('developer-show');\n      });\n    }\n    $main.find('.site-wrapper').on('ajax.populated.xt', function(e, obj, $data) {\n      developerInit();\n    });\n    developerInit();\n    \n  };\n  \n  // init main\n  \n  main($('body'));\n  \n  //////////////////////\n  // xtend\n  //////////////////////\n  \n  // init xt\n  $('body').xtInitAll(true);\n  $('body').xtAjax({'elements': 'a[href^=\"/\"]', 'targets': '.site-wrapper'});\n  \n  // xt-ajax\n  $('.site-wrapper').on('ajax.populated.xt', function(e, obj, $data) {\n    // custom function on ajax\n    main($(this));\n  });\n  \n  /*\n  // test ajax stop page from changing\n  function unloadPage(){\n   return false;\n  }\n  window.onbeforeunload = unloadPage;\n  */\n  /*\n  $('.button__menu').filter(':parents(.xt-ignore)').on('on', function(e, obj) {\n    console.log(triggered, $('.button__menu').filter(':parents(.xt-ignore)').length, $('.button__menu').filter(':parents(.xt-ignore)').not(this).length);\n    if (!triggered && e.target === this) {\n      $('.button__menu').filter(':parents(.xt-ignore)').not(this).trigger('on.xt', [true, true]);\n    }\n  });\n  */\n  /*\n  $('.button__menu').on('off', function(e) {\n    $('.button__menu').not(this).trigger('off', [true]);\n  });\n  */\n  \n  /*\n  // tests\n  $('button').on('on', function(e, obj, $data) {\n    console.log($(this));\n  });\n  */\n  // tests\n  $(document).ready( function() {\n    //$('.site-breadcrumbs-body-main').trigger('on.xt');\n    //$('a[href=\"/\"]').filter(':parents(.xt-ignore)').trigger('on.xt');\n    //if ($('html').atr('id') === 'test-0.html') { console.log(this.settings); }\n    //$('.demo-item').on('on', function(e, obj) { console.log($(e.target)); });\n  });\n  \n  \n})(jQuery, window, document);"]}
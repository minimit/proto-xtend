/*! xtend v0.0.6 (http://www.minimit.com/xtend/)
@copyright (c) 2016 - 2017 Riccardo Caroli
@license MIT (https://github.com/minimit/xtend/blob/master/LICENSE) */
!function(t,e,a,s){"use strict";var i=function(t,e,a){this.group=t,this.init(e,a)},n=function(t,e,a){i.call(this,t,e,a)};n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.fn.xtToggle=function(e){var a={name:"xt-toggle",elements:"> .button",targets:'[class^="toggle-"], [class*=" toggle-"]',class:"active",on:"click",min:0,max:1};return this.each(function(){t.data(this,a.name)||t.data(this,a.name,new n(this,a,e))})};var o=function(t,e,a){i.call(this,t,e,a)};o.prototype=Object.create(i.prototype),o.prototype.constructor=o,t.fn.xtDrop=function(e){var a={name:"xt-drop",elements:"> .button",targets:".drop",class:"active",on:"click",min:0,max:1};return this.each(function(){t.data(this,a.name)||t.data(this,a.name,new o(this,a,e))})};var r=function(t,e,a){i.call(this,t,e,a)};r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.fn.xtOverlay=function(e){var a={name:"xt-overlay",class:"active",on:"click",min:0,max:1,anim:".overlay-inner",backdrop:".overlay-inner"};return this.each(function(){t.data(this,a.name)||t.data(this,a.name,new r(this,a,e))})};var c=function(t,e,a){i.call(this,t,e,a)};c.prototype=Object.create(i.prototype),c.prototype.constructor=c,t.fn.xtScroll=function(e){var a={name:"xt-scroll",class:"active",on:"scroll",min:0,max:1};return this.each(function(){t.data(this,a.name)||t.data(this,a.name,new c(this,a,e))})};var l=function(t,e,a){i.call(this,t,e,a)};l.prototype=Object.create(i.prototype),l.prototype.constructor=l,t.fn.xtAjax=function(e){var a={name:"xt-ajax",class:"active",on:"click"};return this.each(function(){t.data(this,a.name)||t.data(this,a.name,new l(this,a,e))})},t.fn.xt={uid:0},t.fn.xtInitAll=function(e){return this.each(function(){t(this).is("[data-xt-toggle]")&&t(this).xtToggle(),t(this).is("[data-xt-drop]")&&t(this).xtDrop(),t(this).is("[data-xt-overlay]")&&t(this).xtOverlay(),t(this).is("[data-xt-scroll]")&&t(this).xtScroll(),t(this).is("[data-xt-ajax]")&&t(this).xtAjax(),e&&(t(this).find("[data-xt-toggle]").xtToggle(),t(this).find("[data-xt-drop]").xtDrop(),t(this).find("[data-xt-overlay]").xtOverlay(),t(this).find("[data-xt-scroll]").xtScroll(),t(this).find("[data-xt-ajax]").xtAjax())})},i.prototype.init=function(e,a){var s=this,i=this.settings={},n=(this.group,t(this.group));i=t.extend(i,e,a),t.extend(i,n.data(i.name));var o=i.class.split(" ");o.indexOf(e.class)===-1&&(i.class+=" "+e.class),s.defaultClass=e.class,(n.attr("debug")||""===n.attr("debug"))&&(i.debug=!0),s.scope(),s.namespace(),s.setup(),s.events()},i.prototype.namespace=function(){var e=this.settings,a=(this.group,t(this.group));e.targets&&e.targets.indexOf("#")!==-1?e.uid=e.targets:a.attr("id")?e.uid=a.attr("id"):e.uid="unique"+t.fn.xt.uid++,e.namespace=e.name+"_"+e.uid+"_"+e.class,a.attr("data-xt-namespace",e.namespace)},i.prototype.scope=function(){var e=this.settings,a=(this.group,t(this.group));if(e.$elements=null,e.elements&&(e.elements.indexOf("#")!==-1?e.$elements=t(e.elements).filter(":parents(.xt-ignore)"):e.$elements=a.find(e.elements).filter(":parents(.xt-ignore)")),e.$elements&&e.$elements.length||(e.$elements=a),e.$targets=null,"xt-scroll"===e.name){var s=a.parent(".xt-container.xt-position");s.length||(s=a.wrap(t('<div class="xt-container xt-position"></div>'))),e.$targets=s.find(".xt-clone.xt-ignore"),e.$targets.length||(e.$targets=a.clone().addClass("xt-clone xt-ignore").css("visibility","hidden"),t.each(e.$targets.data(),function(t){e.$targets.removeAttr("data-"+t)}),e.$targets.insertAfter(a)),"absolute"===e.mode?a.css("position","absolute"):"fixed"===e.mode&&a.css("position","fixed"),a.is(":fixed")||a.is(":absolute")?(a.css("z-index",70),e.$targets.css("display","block")):e.$targets.css("display","none")}else if(e.targets)if(e.targets.indexOf("#")!==-1)e.$targets=t(e.targets).filter(":parents(.xt-ignore)");else{var i=a.find(e.targets),n=i.find(e.targets);e.$targets=i.not(n).filter(":parents(.xt-ignore)")}},i.prototype.setup=function(){var s=this,i=this.settings;this.group,t(this.group);if("xt-ajax"===i.name){var n,o;if(history.state&&history.state.url)n=history.state.url;else{var r=e.location.href.split("#")[0];n=r.replace(/https?:\/\/[^\/]+/i,"")}i.$elements.each(function(){if(t(this).attr("href")===n)return o=t(this),!1}),o&&(i.$targets.attr("data-xt-ajaxified",n),s.pushstate(n,a.title),s.activate(o),i.$targets.trigger("ajax.init.xt",[s]))}else{if(i.$elements){i.$elements.each(function(){t(this).hasClass(s.defaultClass)&&(t(this).removeClass(i.class),s.activate(t(this)))});var c=s.getCurrents(),l=i.min-c.length;if(l)for(var p=0;p<l;p++)s.activate(i.$elements.eq(p))}"xt-overlay"===i.name&&i.$targets.appendTo("body")}},i.prototype.events=function(){var e=this,a=this.settings;this.group,t(this.group);"xt-scroll"===a.name?e.eventsScroll():e.eventsDefault()},i.prototype.eventsDefault=function(){var a,s=this,i=this.settings,n=(this.group,t(this.group)),o=i.$elements.slice(0);"xt-drop"===i.name&&"mouseleave"===i.off&&(a=o,o=n),o&&(i.on&&o.off(i.on).on(i.on,function(e){var n=a?a:t(this);s.toggle(n),"xt-ajax"===i.name&&e.preventDefault()}),i.off&&o.off(i.off).on(i.off,function(e){var i=a?a:t(this);s.toggle(i)}),"xt-drop"===i.name&&i.$targets.find("[href], [data-xt-reset]").off("click.xt.href").on("click.xt.href",function(t){s.deactivate(o)}),o.off("xtRemoved").on("xtRemoved",function(e){"xt-overlay"===i.name&&(i.$targets.remove(),s.deactivate(t(this),!1,!0,!0))}),o.off("activate.xt").on("activate.xt",function(e,a,i){i||e.target!==this||s.activate(t(this),!0)}),o.off("deactivate.xt").on("deactivate.xt",function(e,a,i){i||e.target!==this||s.deactivate(t(this),!0)})),"xt-ajax"===i.name&&t(e).off("popstate.xt."+i.namespace).on("popstate.xt."+i.namespace,function(t){history.state&&history.state.url&&s.ajax(history.state.url,history.state.title)})},i.prototype.eventsScroll=function(){var a=this,i=this.settings,n=(this.group,t(this.group)),o=i.$targets.parent(".xt-container.xt-position"),r="resize.xt."+i.namespace;t(e).off(r),t(e).on(r,function(t){o.css("width",o.parent().width())}),t(e).trigger(r);var c="scroll.xt."+i.namespace;t(e).off(c),t(e).on(c,function(r){var c=t(this).scrollTop();if(c!==i.scrollTopOld){var l=o.offset().top,p=1/0;i.top!==s&&(l=isNaN(parseFloat(i.top))?t(i.top).offset().top:i.top),i.bottom!==s&&(isNaN(parseFloat(i.bottom))?t(i.bottom).length&&(p=t(i.bottom).offset().top):p=i.bottom),c>=l&&c<p?n.hasClass(a.defaultClass)||(e.xtRequestAnimationFrame(function(){a.activate(n)}),n.removeClass("scroll-off-top scroll-off-bottom"),i.scrollTopOld>c?(n.removeClass("scroll-on-top"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-on-bottom")})):(n.removeClass("scroll-on-bottom"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-on-top")}))):n.hasClass(a.defaultClass)&&(e.xtRequestAnimationFrame(function(){a.deactivate(n)}),n.removeClass("scroll-on-top scroll-on-bottom"),i.scrollTopOld>c?(n.removeClass("scroll-off-top"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-off-bottom")})):(n.removeClass("scroll-off-bottom"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-off-top")})))}i.scrollTopOld=c}),t(e).trigger(c),n.on("xtRemoved",function(a){t(e).off(r),t(e).off(c)})},i.prototype.toggle=function(e,a,s,i){var n=this;this.settings,this.group,t(this.group);e.hasClass(n.defaultClass)?n.deactivate(e,a,s,i):n.activate(e,a,s,i)},i.prototype.activate=function(a,s,i,n){var o=this,r=this.settings,c=(this.group,t(this.group));if(a&&!a.hasClass(o.defaultClass)){var l=o.getIndexed(r.$elements,a,r.$elements);o.activateAfter(l,s);var p=o.getCurrents();if(p=o.setCurrents(p.pushElement(a)),i||e.xtRequestAnimationFrame(function(){var e=t('[data-xt-namespace="'+r.namespace+'"]').filter(":parents(.xt-ignore)").not(c);e.each(function(){var e=t(this).data(r.name);e.activate(t(this),!0,!0)})}),"xt-ajax"===r.name)o.checkDisabled(a,"disable"),o.ajax(a.attr("href"));else if(o.checkDisabled(a),!i&&p.length>r.max){var f=p.first();o.deactivate(f)}}if(r.$targets){var h=o.getIndexed(r.$elements,a,r.$targets);if(!h.hasClass(o.defaultClass)&&(o.activateAfter(h,s),"xt-overlay"===r.name)){o.onFixed(t("html, .xt-backdrop"));var d=t("html");d.hasClass(o.defaultClass)||d.addClass(r.class)}}},i.prototype.deactivate=function(a,s,i,n){var o=this,r=this.settings,c=(this.group,t(this.group));if(a){var l=o.getCurrents();if(a.hasClass(o.defaultClass)){if(i||"xt-ajax"===r.name||l.length>r.min){var p=o.getIndexed(r.$elements,a,r.$elements);o.deactivateAfter(p,s),l=a.attr("data-group")?o.setCurrents(l.not("[data-group="+a.attr("data-group")+"]")):o.setCurrents(l.not(p)),i||e.xtRequestAnimationFrame(function(){var e=t('[data-xt-namespace="'+r.namespace+'"]').filter(":parents(.xt-ignore)").not(c);e.each(function(){var e=t(this).data(r.name);e.deactivate(t(this),!0,!0)})})}i||"xt-ajax"===r.name?o.checkDisabled(a,"enable"):o.checkDisabled(a)}}if(r.$targets){var f=o.getIndexed(r.$elements,a,r.$targets);if(f.hasClass(o.defaultClass)&&(o.deactivateAfter(f,s),"xt-overlay"===r.name)){o.offFixed(t(".xt-fixed-vertical"));var h=t("html");h.hasClass(o.defaultClass)&&h.removeClass(r.class)}}},i.prototype.checkDisabled=function(e,a){var s=this,i=this.settings,n=(this.group,t(this.group),"disabled");if("click"===i.on)if(a)"disable"===a?e.attr(n,n):"enable"===a&&e.removeAttr(n);else{var o,r=s.getCurrents(),c=i.min;r.length===c?(o=!0,r.attr(n,n)):r.removeAttr(n),r.filter("[data-group]").each(function(){var e=t(this).attr("data-group"),a=i.$elements.not(this).filter('[data-group="'+e+'"]');o?a.attr(n,n):a.removeAttr(n)})}},i.prototype.activateAfter=function(e,s){var i=this,n=this.settings,o=(this.group,t(this.group)),r=e.slice(0),c=r;n.anim&&(c=r.find(n.anim),r=r.pushElement(c)),r.addClass(n.class).removeClass("fade-out"),i.animationDelayClear(r,"anim"),i.animationMultiple(r,s,i.activateDone,"fade-in"),i.onBackdrop(r,s),i.onWidth(r,s),i.onHeight(r,s),i.onMiddle(r,s),i.onCenter(r,s),"xt-drop"===n.name&&t(a).off("click.xt."+n.namespace).on("click.xt."+n.namespace,function(e){var a=t(e.target);o.is(a)||o.has(a).length||i.deactivate(n.$elements,!0,!0,!0)}),"xt-overlay"===n.name&&r.find(".overlay-close").off("click.xt."+n.namespace).on("click.xt."+n.namespace,function(t){i.deactivate(n.$elements,!0,!1,!0)}),s||r.trigger("activate.xt",[i,!0])},i.prototype.activateDone=function(e,a){var s=this;this.settings,this.group,t(this.group);e.hasClass("collapse-height")&&e.css("height","auto"),e.hasClass("collapse-width")&&e.css("width","auto"),a||e.trigger("fadein.xt.done",[s,!0])},i.prototype.deactivateAfter=function(s,i){var n=this,o=this.settings,r=(this.group,t(this.group),s.slice(0)),c=r;o.anim&&(c=r.find(o.anim),r=r.pushElement(c)),r.removeClass(o.class).removeClass("fade-in").addClass("fade-out"),n.animationDelayClear(r,"anim"),n.animationMultiple(r,i,n.deactivateDone),n.offBackdrop(r,i),n.onWidth(r,i),n.onHeight(r,i),e.xtRequestAnimationFrame(function(){n.offWidth(r,i),n.offHeight(r,i)}),"xt-drop"===o.name&&t(a).off("click.xt."+o.namespace),i||r.trigger("deactivate.xt",[n,!0])},i.prototype.deactivateDone=function(t,e){var a=this;this.settings;t.removeClass("fade-out"),(t.hasClass("collapse-height")||t.hasClass("collapse-width"))&&a.removeWrap(t),e||t.trigger("fadeout.xt",[a,!0])},i.prototype.animationMultiple=function(a,s,i,n){var o=this,r=0;a.each(function(){var c=t(this);e.xtCancelAnimationFrame(c.data("frame.timeout"));var l=e.xtRequestAnimationFrame(function(){n&&c.addClass(n),o.animationDelay(c,"anim",function(){return!(++r<a.length)&&void i.apply(o,[a,s])})});c.data("frame.timeout",l)})},i.prototype.animationDelay=function(t,a,i){var n=this,o=this.settings,r=o.timing,c=t.css("transitionDuration"),l=t.css("animationDuration");if(o.timing!==s||"0s"===c&&"0s"===l||(c=n.stringToMilliseconds(c),l=n.stringToMilliseconds(l),r=Math.max(c,l)),r){var p=e.setTimeout(function(t){i()},r);t.data("fade.timeout."+a,p)}else i()},i.prototype.animationDelayClear=function(t,e){clearTimeout(t.data("fade.timeout."+e)),t.off("transitionend.xt."+e),clearTimeout(t.data("fade.timeout."+e)),t.off("transitionend.xt."+e)},i.prototype.onBackdrop=function(a,s){var i=this,n=this.settings,o=a.find(n.backdrop),r=t([]);if(o.length?r=o.parent():a.hasClass("backdrop")&&(r=a.parent()),r.length){var c=r.find("> .xt-backdrop");c.length||(c=t('<div class="xt-backdrop xt-ignore"></div>').appendTo(r)),i.animationDelayClear(c,"backdrop"),e.xtCancelAnimationFrame(c.data("frame.timeout"));var l=e.xtRequestAnimationFrame(function(){c.addClass("fade-in"),c.removeClass("fade-out")});c.data("frame.timeout",l);var p="click.backdrop.xt";"mouseleave"===n.off&&(p="mouseenter.backdrop.xt"),c.off(p).on(p,function(t){i.deactivate(n.$elements,!0,!1,!0)}),o.length&&a.off(p).on(p,function(e){t(e.target).is(o)&&i.deactivate(n.$elements,!0,!1,!0)})}},i.prototype.offBackdrop=function(t,a){var s=this,i=this.settings,n=t.hasClass("backdrop")?t.parent():t.find(i.backdrop).parent();if(n.length){var o=n.find("> .xt-backdrop");if(o.length){o.removeClass("fade-in"),s.animationDelayClear(o,"backdrop"),e.xtCancelAnimationFrame(o.data("frame.timeout"));var r=e.xtRequestAnimationFrame(function(){o.addClass("fade-out"),s.animationDelay(o,"backdrop",function(){o.removeClass("fade-out").remove()})});o.data("frame.timeout",r),o.off("click.backdrop.xt"),t.off("click.backdrop.xt")}}},i.prototype.onWidth=function(e){var a=this;e.each(function(){var e=t(this);if(e.hasClass("collapse-width")){a.addWrap(e);var s=e.parent(".xt-container"),i=e.find("> .xt-position"),n=s.outerWidth();i.css("width",n),e.css("width",n),e.parents(".collapse-width-left").css("margin-left",-n),e.parents(".collapse-width-right").css("margin-right",-n)}})},i.prototype.offWidth=function(e){e.each(function(){var e=t(this);e.hasClass("collapse-width")&&(e.css("width",0),e.parents(".collapse-width-left").css("margin-left",0),e.parents(".collapse-width-right").css("margin-right",0))})},i.prototype.onHeight=function(e){var a=this;e.each(function(){var e=t(this);if(e.hasClass("collapse-height")){a.addWrap(e);var s=e.find("> .xt-position"),i=s.outerHeight();e.css("height",i),e.parents(".collapse-height-top").css("margin-top",-i),e.parents(".collapse-height-bottom").css("margin-bottom",-i)}})},i.prototype.offHeight=function(e){e.each(function(){var e=t(this);e.hasClass("collapse-height")&&(e.css("height",0),e.parents(".collapse-height-top").css("margin-top",0),e.parents(".collapse-height-bottom").css("margin-bottom",0))})},i.prototype.onMiddle=function(e){e.each(function(){var e=t(this);if(e.hasClass("middle")&&!e.attr("middle.done")){var a=e.parent(),s=a.outerHeight()/2,i=e.outerHeight()/2;e.attr("middle.done",!0).css("top",s-i)}})},i.prototype.onCenter=function(e){e.each(function(){var e=t(this);if(e.hasClass("center")&&!e.attr("center.done")){var a=e.parent(),s=a.outerWidth()/2,i=e.outerWidth()/2;e.attr("center.done",!0).css("left",s-i)}})},i.prototype.addWrap=function(t){var e=t.parent(".xt-container");e.length||t.wrap('<div class="xt-container"></div>');var a=t.find("> .xt-position");a.length||t.wrapInner('<div class="xt-position"></div>')},i.prototype.removeWrap=function(t){var e=t.parent(".xt-container");e.length&&e.contents().unwrap();var a=t.find("> .xt-position");a.length&&a.contents().unwrap()},i.prototype.getCurrents=function(){var e=this.settings,a=(this.group,t(this.group)),s=a.data("$currents."+e.namespace)||t([]);return s},i.prototype.setCurrents=function(e){var a=this.settings,s=(this.group,t(this.group));return s.data("$currents."+a.namespace,e),e},i.prototype.getIndexed=function(e,a,s){var i=this,n=this.settings,o=(this.group,t(this.group));if(e.is(o))return s;if(a.is("[data-group]")){var r=a.attr("data-group");return s.filter('[data-group="'+r+'"]')}if(n.$targets.has(s)){var c=i.getIndex(e.not("[data-group]"),a);return s.not("[data-group]").eq(c)}return a},i.prototype.onFixed=function(e){var a=this,s=(this.settings,this.group,t(this.group),a.scrollbarWidth(e));s="hidden"===e.css("overflow-y")?0:s,e.addClass("xt-fixed-vertical").css("padding-right",s).css("background-clip","content-box")},i.prototype.offFixed=function(e){this.settings,this.group,t(this.group);e.removeClass("xt-fixed-vertical").css("padding-right",0).css("background-clip","")},i.prototype.getIndex=function(e,a){var s=0;return e&&a&&e.each(function(e){if(t(this).is(a.get(0)))return s=e,!1}),s},i.prototype.scrollbarWidth=function(e){var a,i,n;return n===s&&(a=t('<div style="width:50px; height:50px; overflow:auto;"><div /></div>').appendTo(e),i=a.children(),n=i.innerWidth()-i.height(99).innerWidth(),a.remove()),n},i.prototype.stringToMilliseconds=function(t){var e,a=parseFloat(t,10),s=t.match(/m?s/);switch(s&&(s=s[0]),s){case"s":e=1e3*a;break;case"ms":e=a;break;default:e=0}return e},i.prototype.ajax=function(e,a){var s=this,i=this.settings;this.group,t(this.group);i.$targets.attr("data-xt-ajaxified")!==e&&t.ajax({type:"GET",url:e,success:function(n,o,r){var c=t("<div />").html(n);i.$targets.trigger("ajax.success.xt",[s,c]);var l=c.find(i.targets).contents();a=a?a:c.find("title").text(),i.$targets.html(l),i.$targets.attr("data-xt-ajaxified",e),s.scope(),s.events(),s.pushstate(e,a),i.$targets.trigger("ajax.populated.xt",[s,c]),i.$targets.xtInitAll(!0)},error:function(t,a,s){console.error("ajax error url:"+e+" "+s)}})},i.prototype.pushstate=function(e,s){var i=this,n=this.settings;this.group,t(this.group);a.title=s,n.$elements.filter('[href="'+e+'"]').each(function(){i.activate(t(this),!0,!1,!0)}),history.state&&history.state.url&&history.state.url===e||history.pushState({url:e,title:s},s,e)},e.xtRequestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),e.xtCancelAnimationFrame=function(t){return e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||function(a){e.clearTimeout(t)}}(),t.fn.pushElement=function(t){return Array.prototype.push.apply(this,t),this},t.event.special.xtRemoved={remove:function(t){t.handler&&t.handler()}},t.expr[":"].parents=function(e,a,s){return t(e).parents(s[3]).length<1},t.expr[":"].fixed=function(e,a,s){return"fixed"===t(e).css("position")},t.expr[":"].absolute=function(e,a,s){return"absolute"===t(e).css("position")}}(jQuery,window,document);
//# sourceMappingURL=xtend.min.js.map

/*! xtend v0.0.6 (http://www.minimit.com/xtend/)
@copyright (c) 2016 - 2017 Riccardo Caroli
@license MIT (https://github.com/minimit/xtend/blob/master/LICENSE) */
!function(t,e,s,a){"use strict";var i=function(t,e,s){this.group=t,this.init(e,s)},n=function(t,e,s){i.call(this,t,e,s)};n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.fn.xtToggle=function(e){var s={name:"xt-toggle",elements:null,targets:".toggle-flex, .toggle-block, .toggle-inline-block, .toggle-inline, .toggle-none",class:"active",on:"click",off:null,min:0,max:1};return this.each(function(){t.data(this,s.name)||t.data(this,s.name,new n(this,s,e))})};var o=function(t,e,s){i.call(this,t,e,s)};o.prototype=Object.create(i.prototype),o.prototype.constructor=o,t.fn.xtOverlay=function(e){var s={name:"xt-overlay",targets:"",on:"click",class:"active",min:0,max:1};return this.each(function(){t.data(this,s.name)||t.data(this,s.name,new o(this,s,e))})};var r=function(t,e,s){i.call(this,t,e,s)};r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.fn.xtScroll=function(e){var s={name:"xt-scroll",on:"scroll",class:"active",min:0,max:1};return this.each(function(){t.data(this,s.name)||t.data(this,s.name,new r(this,s,e))})};var l=function(t,e,s){i.call(this,t,e,s)};l.prototype=Object.create(i.prototype),l.prototype.constructor=l,t.fn.xtAjax=function(e){var s={name:"xt-ajax",targets:null,on:"click",class:"active",url:null};return this.each(function(){t.data(this,s.name)||t.data(this,s.name,new l(this,s,e))})},t.fn.xt={uid:0},t.fn.xtInitAll=function(e){return this.each(function(){t(this).is("[data-xt-toggle]")&&t(this).xtToggle(),t(this).is("[data-xt-overlay]")&&t(this).xtOverlay(),t(this).is("[data-xt-scroll]")&&t(this).xtScroll(),t(this).is("[data-xt-ajax]")&&t(this).xtAjax(),e&&(t(this).find("[data-xt-toggle]").xtToggle(),t(this).find("[data-xt-overlay]").xtOverlay(),t(this).find("[data-xt-scroll]").xtScroll(),t(this).find("[data-xt-ajax]").xtAjax())})},i.prototype.init=function(e,s){var a=this,i=this.settings={},n=(this.group,t(this.group));i=t.extend(i,e,s),t.extend(i,n.data(i.name));var o=i.class.split(" ");o.indexOf(e.class)===-1&&(i.class+=" "+e.class),a.defaultClass=e.class,(n.attr("debug")||""===n.attr("debug"))&&(i.debug=!0),a.scope(),a.namespace(),a.setup(),a.events()},i.prototype.namespace=function(){var e=this.settings,s=(this.group,t(this.group));e.targets&&e.targets.indexOf("#")!==-1?e.uid=e.targets:s.attr("id")?e.uid=s.attr("id"):e.uid="unique"+t.fn.xt.uid++,e.namespace=e.name+"_"+e.uid+"_"+e.class,s.attr("data-xt-namespace",e.namespace)},i.prototype.scope=function(){var e=this.settings,s=(this.group,t(this.group));if(e.elements?e.elements.indexOf("#")!==-1?e.$elements=t(e.elements).filter(":parents(.xt-ignore)"):e.$elements=s.find(e.elements).filter(":parents(.xt-ignore)"):e.$elements=s,"xt-scroll"===e.name){var a=s.parent(".xt-container.xt-position");a.length||(a=s.wrap(t('<div class="xt-container xt-position"></div>'))),e.$targets=a.find(".xt-clone.xt-ignore"),e.$targets.length||(e.$targets=s.clone().addClass("xt-clone xt-ignore").css("visibility","hidden"),t.each(e.$targets.data(),function(t){e.$targets.removeAttr("data-"+t)}),e.$targets.insertAfter(s)),"absolute"===e.mode?s.css("position","absolute"):"fixed"===e.mode&&s.css("position","fixed"),s.is(":fixed")||s.is(":absolute")?(s.css("z-index",70),e.$targets.css("display","block")):e.$targets.css("display","none")}else e.targets&&(e.targets.indexOf("#")!==-1?e.$targets=t(e.targets).filter(":parents(.xt-ignore)"):e.$targets=s.find(e.targets).filter(":parents(.xt-ignore)").filter(":parents("+e.targets+")"))},i.prototype.setup=function(){var a=this,i=this.settings;this.group,t(this.group);if("xt-ajax"===i.name){var n,o;if(history.state&&history.state.url)n=history.state.url;else{var r=e.location.href.split("#")[0];n=r.replace(/https?:\/\/[^\/]+/i,"")}i.$elements.each(function(){if(t(this).attr("href")===n)return o=t(this),!1}),o&&(i.$targets.attr("data-xt-ajaxified",n),a.pushstate(n,s.title),a.show(o),i.$targets.trigger("ajax.init.xt",[a]))}else{if(i.$elements){i.$elements.each(function(){t(this).hasClass(a.defaultClass)&&(t(this).removeClass(i.class),a.show(t(this)))});var l=a.getCurrents(),h=i.min-l.length;if(h)for(var c=0;c<h;c++)a.show(i.$elements.eq(c))}"xt-overlay"===i.name&&i.$targets.appendTo("body")}},i.prototype.events=function(){var e=this,s=this.settings;this.group,t(this.group);"xt-scroll"===s.name?e.eventsScroll():e.eventsDefault()},i.prototype.eventsDefault=function(){var s=this,a=this.settings;this.group,t(this.group);a.$elements&&(a.on&&a.$elements.off(a.on).on(a.on,function(e){s.toggle(t(this)),"xt-ajax"===a.name&&e.preventDefault()}),a.off&&a.$elements.off(a.off).on(a.off,function(e){s.toggle(t(this))}),a.$elements.on("xtRemoved",function(e){"xt-overlay"===a.name&&s.hide(t(this),!1,!0,!0)}),a.$elements.on("show.xt",function(e,a,i){i||e.target!==this||s.show(t(this),!0)}),a.$elements.on("hide.xt",function(e,a,i){i||e.target!==this||s.hide(t(this),!0)})),"xt-ajax"===a.name&&(t(e).off("popstate.xt."+a.namespace),t(e).on("popstate.xt."+a.namespace,function(t){history.state&&history.state.url&&s.ajax(history.state.url,history.state.title)}))},i.prototype.eventsScroll=function(){var s=this,i=this.settings,n=(this.group,t(this.group)),o=i.$targets.parent(".xt-container.xt-position"),r="resize.xt."+i.namespace;t(e).off(r),t(e).on(r,function(t){o.css("width",o.parent().width())}),t(e).trigger(r);var l="scroll.xt."+i.namespace;t(e).off(l),t(e).on(l,function(r){var l=t(this).scrollTop();if(l!==i.scrollTopOld){var h=o.offset().top,c=1/0;i.top!==a&&(h=isNaN(parseFloat(i.top))?t(i.top).offset().top:i.top),i.bottom!==a&&(isNaN(parseFloat(i.bottom))?t(i.bottom).length&&(c=t(i.bottom).offset().top):c=i.bottom),l>=h&&l<c?n.hasClass(s.defaultClass)||(e.xtRequestAnimationFrame(function(){s.show(n)}),n.removeClass("scroll-off-top scroll-off-bottom"),i.scrollTopOld>l?(n.removeClass("scroll-on-top"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-on-bottom")})):(n.removeClass("scroll-on-bottom"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-on-top")}))):n.hasClass(s.defaultClass)&&(e.xtRequestAnimationFrame(function(){s.hide(n)}),n.removeClass("scroll-on-top scroll-on-bottom"),i.scrollTopOld>l?(n.removeClass("scroll-off-top"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-off-bottom")})):(n.removeClass("scroll-off-bottom"),e.xtRequestAnimationFrame(function(){n.addClass("scroll-off-top")})))}i.scrollTopOld=l}),t(e).trigger(l),n.on("xtRemoved",function(s){t(e).off(r),t(e).off(l)})},i.prototype.toggle=function(e,s,a,i){var n=this;this.settings,this.group,t(this.group);e.hasClass(n.defaultClass)?n.hide(e,s,a,i):n.show(e,s,a,i)},i.prototype.show=function(s,a,i,n){var o=this,r=this.settings,l=(this.group,t(this.group));if(s&&!s.hasClass(o.defaultClass)){var h=o.getElements(r.$elements,s);o.showAfter(h,a);var c=o.getCurrents();if(c=o.setCurrents(c.pushElement(s)),i||e.xtRequestAnimationFrame(function(){var e=t('[data-xt-namespace="'+r.namespace+'"]').filter(":parents(.xt-ignore)").not(l);e.each(function(){var e=t(this).data(r.name);e.show(t(this),!0,!0)})}),"xt-ajax"===r.name)o.checkDisabled(s,"disable"),o.ajax(s.attr("href"));else if(o.checkDisabled(s),!i&&c.length>r.max){var u=c.first();o.hide(u)}}if(r.$targets){var p=o.getTargets(r.$elements,s,r.$targets);if(!p.hasClass(o.defaultClass)&&(o.showAfter(p,a),"xt-overlay"===r.name)){o.onFixed(t("html"));var f=t("html");f.hasClass(o.defaultClass)||(f.addClass(r.class),e.xtRequestAnimationFrame(function(){f.addClass("in")}))}}},i.prototype.hide=function(s,a,i,n){var o=this,r=this.settings,l=(this.group,t(this.group));if(s){var h=o.getCurrents();if(s.hasClass(o.defaultClass)){if(i||"xt-ajax"===r.name||h.length>r.min){var c=o.getElements(r.$elements,s);o.hideAfter(c,a),h=s.attr("data-group")?o.setCurrents(h.not("[data-group="+s.attr("data-group")+"]")):o.setCurrents(h.not(s.get(0))),i||e.xtRequestAnimationFrame(function(){var e=t('[data-xt-namespace="'+r.namespace+'"]').filter(":parents(.xt-ignore)").not(l);e.each(function(){var e=t(this).data(r.name);e.hide(t(this),!0,!0)})})}i||"xt-ajax"===r.name?o.checkDisabled(s,"enable"):o.checkDisabled(s)}}if(r.$targets){var u=o.getTargets(r.$elements,s,r.$targets);if(u.hasClass(o.defaultClass)&&(o.hideAfter(u,a),"xt-overlay"===r.name)){o.offFixed(t("html"));var p=t("html");p.hasClass(o.defaultClass)&&(p.removeClass(r.class),p.removeClass("in"),p.addClass("out"),r.$targets.off("hide.xt.done.additional").one("hide.xt.done.additional",function(){p.removeClass("out")}))}}},i.prototype.showAfter=function(a,i){var n=this,o=this.settings,r=(this.group,t(this.group)),l=a;a.hasClass("overlay")&&(l=a.find(".inside .content")),a.addClass(o.class),a.removeClass("out"),l.removeClass("out"),n.animationDelayClear(l,"anim"),e.xtCancelAnimationFrame(l.data("frame.timeout"));var h=e.xtRequestAnimationFrame(function(){l.addClass("in"),n.animationDelay(l,"anim",function(){n.showDone(a,l,i)}),r.hasClass("drop")&&t(s).off("click.xt."+o.namespace).on("click.xt."+o.namespace,function(e){var s=t(e.target);r.is(s)||r.has(s).length||n.hide(o.$elements,!0,!0,!0)})});l.data("frame.timeout",h),a.hasClass("backdrop")&&n.onBackdrop(a,l,i),a.hasClass("a-width")&&n.onWidth(a,i),a.hasClass("a-height")&&n.onHeight(a,i),a.hasClass("middle")&&n.onMiddle(a,i),a.hasClass("center")&&n.onCenter(a,i),i||a.trigger("show.xt",[n,!0])},i.prototype.showDone=function(e,s,a){var i=this;this.settings,this.group,t(this.group);e.hasClass("a-height")&&e.css("height","auto"),e.hasClass("a-width")&&e.css("width","auto"),a||e.trigger("show.xt.done",[i,!0])},i.prototype.hideAfter=function(a,i){var n=this,o=this.settings,r=(this.group,t(this.group)),l=a;a.hasClass("overlay")&&(l=a.find(".inside .content")),a.removeClass(o.class),a.removeClass("in").addClass("out"),l.removeClass("in").addClass("out"),n.animationDelayClear(l,"anim"),e.xtCancelAnimationFrame(l.data("frame.timeout"));var h=e.xtRequestAnimationFrame(function(){n.animationDelay(l,"anim",function(){n.hideDone(a,l,i)}),r.hasClass("drop")&&t(s).off("click.xt."+o.namespace)});l.data("frame.timeout",h),a.hasClass("a-width")&&n.onWidth(a,i),a.hasClass("a-height")&&n.onHeight(a,i),e.xtRequestAnimationFrame(function(){a.hasClass("backdrop")&&n.offBackdrop(a,l,i),a.hasClass("a-width")&&n.offWidth(a,i),a.hasClass("a-height")&&n.offHeight(a,i)}),i||a.trigger("hide.xt",[n,!0])},i.prototype.hideDone=function(t,e,s){var a=this;this.settings;t.removeClass("out"),e.removeClass("out"),(t.hasClass("a-height")||t.hasClass("a-width"))&&a.removeWrap(t),s||t.trigger("hide.xt.done",[a,!0])},i.prototype.animationDelay=function(t,s,i){var n=this.settings;if(n.timeOut===a&&"0s"!==t.css("transitionDuration"))t.on("transitionend.xt."+s,function(t){i()});else if(n.timeOut){var o=e.setTimeout(function(t){i()},n.timeOut);t.data("fade.timeout."+s,o)}else i()},i.prototype.animationDelayClear=function(t,e){clearTimeout(t.data("fade.timeout."+e)),t.off("transitionend.xt."+e),clearTimeout(t.data("fade.timeout."+e)),t.off("transitionend.xt."+e)},i.prototype.onBackdrop=function(s,a,i){var n=this,o=this.settings,r=a.parent(),l=r.find("> .xt-backdrop");l.length||(l=t('<div class="xt-backdrop"></div>').appendTo(r)),n.animationDelayClear(l,"backdrop"),e.xtRequestAnimationFrame(function(){l.addClass("in"),l.removeClass("out")}),l.on("click",function(t){n.hide(n.settings.$elements,!0,!0,!0)});var h=l.parent(".inside");if(h.length){var c="resize.xt.backdrop."+o.namespace;t(e).off(c).on(c,function(t){l.css("width",h.width()),l.css("height",h.height())}),t(e).trigger(c)}},i.prototype.offBackdrop=function(s,a,i){var n=this,o=this.settings,r=a.parent(),l=r.find("> .xt-backdrop");l.length&&(l.removeClass("in"),e.xtRequestAnimationFrame(function(){l.addClass("out"),n.animationDelay(l,"backdrop",function(){l.removeClass("out").remove()})}));var h=l.parent(".inside");if(h.length){var c="resize.xt.backdrop."+o.namespace;t(e).off(c)}},i.prototype.onWidth=function(t){var e=this;e.addWrap(t);var s=t.parent(".xt-container"),a=t.find("> .xt-position"),i=s.outerWidth();a.css("width",i),t.css("width",i),t.parents(".a-width-left").css("margin-left",-i),t.parents(".a-width-right").css("margin-right",-i)},i.prototype.offWidth=function(t){t.css("width",0),t.parents(".a-width-left").css("margin-left",0),t.parents(".a-width-right").css("margin-right",0)},i.prototype.onHeight=function(t){var e=this;e.addWrap(t);var s=t.find("> .xt-position"),a=s.outerHeight();t.css("height",a),t.parents(".a-height-top").css("margin-top",-a),t.parents(".a-height-bottom").css("margin-bottom",-a)},i.prototype.offHeight=function(t){t.css("height",0),t.parents(".a-height-top").css("margin-top",0),t.parents(".a-height-bottom").css("margin-bottom",0)},i.prototype.onMiddle=function(t){var e=t.parent(),s=e.outerHeight()/2,a=t.outerHeight()/2;t.css("top",s-a)},i.prototype.onCenter=function(t){var e=t.parent(),s=e.outerWidth()/2,a=t.outerWidth()/2;t.css("left",s-a)},i.prototype.addWrap=function(t){var e=t.parent(".xt-container");e.length||t.wrap('<div class="xt-container"></div>');var s=t.find("> .xt-position");s.length||t.wrapInner('<div class="xt-position"></div>')},i.prototype.removeWrap=function(t){var e=t.parent(".xt-container");e.length&&t.unwrap();var s=t.find("> .xt-position");s.length&&s.contents().unwrap()},i.prototype.getCurrents=function(){var e=this.settings,s=(this.group,t(this.group)),a=s.data("$currents."+e.namespace)||t([]);return a},i.prototype.setCurrents=function(e){var s=this.settings,a=(this.group,t(this.group));return a.data("$currents."+s.namespace,e),e},i.prototype.getElements=function(e,s){var a=(this.settings,this.group,t(this.group));if(e.is(a))return e;if(s.is("[data-group]")){var i=s.attr("data-group");return e.filter('[data-group="'+i+'"]')}return s},i.prototype.getTargets=function(e,s,a){var i=this,n=(this.settings,this.group,t(this.group));if(e.is(n))return a;if(s.is("[data-group]")){var o=s.attr("data-group");return a.filter('[data-group="'+o+'"]')}var r=i.getIndex(e.not("[data-group]"),s);return a.not("[data-group]").eq(r)},i.prototype.onFixed=function(e){var s=this,a=(this.settings,this.group,t(this.group),s.scrollbarWidth(e));a="hidden"===e.css("overflow-y")?0:a,e.addClass("xt-fixed-vertical").css("padding-right",a).css("background-clip","content-box")},i.prototype.offFixed=function(e){this.settings,this.group,t(this.group);e.removeClass("xt-fixed-vertical").css("padding-right",0).css("background-clip","")},i.prototype.getIndex=function(e,s){var a=0;return e&&s&&e.each(function(e){if(t(this).is(s.get(0)))return a=e,!1}),a},i.prototype.checkDisabled=function(e,s){var a=this,i=this.settings,n=(this.group,t(this.group),"disabled");if("click"===i.on)if(s)"disable"===s?e.attr(n,n):"enable"===s&&e.removeAttr(n);else{var o,r=a.getCurrents(),l=i.min;r.length===l?(o=!0,r.attr(n,n)):r.removeAttr(n),r.filter("[data-group]").each(function(){var e=t(this).attr("data-group"),s=i.$elements.not(this).filter('[data-group="'+e+'"]');o?s.attr(n,n):s.removeAttr(n)})}},i.prototype.scrollbarWidth=function(e){var s,i,n;return n===a&&(s=t('<div style="width:50px; height:50px; overflow:auto;"><div /></div>').appendTo(e),i=s.children(),n=i.innerWidth()-i.height(99).innerWidth(),s.remove()),n},i.prototype.ajax=function(e,s){var a=this,i=this.settings;this.group,t(this.group);i.$targets.attr("data-xt-ajaxified")!==e&&t.ajax({type:"GET",url:e,success:function(n,o,r){var l=t("<div />").html(n);i.$targets.trigger("ajax.success.xt",[a,l]);var h=l.find(i.targets).contents();s=s?s:l.find("title").text(),i.$targets.html(h),i.$targets.attr("data-xt-ajaxified",e),a.scope(),a.events(),a.pushstate(e,s),i.$targets.trigger("ajax.populated.xt",[a,l]),i.$targets.xtInitAll(!0)},error:function(t,s,a){console.error("ajax error url:"+e+" "+a)}})},i.prototype.pushstate=function(e,a){var i=this,n=this.settings;this.group,t(this.group);s.title=a,n.$elements.filter('[href="'+e+'"]').each(function(){i.show(t(this),!0,!1,!0)}),history.state&&history.state.url&&history.state.url===e||history.pushState({url:e,title:a},a,e)},e.xtRequestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),e.xtCancelAnimationFrame=function(t){return e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||function(s){e.clearTimeout(t)}}(),t.fn.pushElement=function(t){return Array.prototype.push.apply(this,t),this},t.event.special.xtRemoved={remove:function(t){t.handler&&t.handler()}},t.expr[":"].parents=function(e,s,a){return t(e).parents(a[3]).length<1},t.expr[":"].fixed=function(e,s,a){return"fixed"===t(e).css("position")},t.expr[":"].absolute=function(e,s,a){return"absolute"===t(e).css("position")}}(jQuery,window,document);
//# sourceMappingURL=xtend.min.js.map

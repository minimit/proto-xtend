{"version":3,"sources":["main.js"],"names":["$","window","document","undefined","main","$main","populateDemo","$container","i","$items","find","prepend","append","length","css","each","k","$item","this","name","attr","eq","id","clipboard","Clipboard","target","trigger","parents","on","e","clearSelection","$iframe","initIframe","addClass","populateIframe","resizeIframe","contentWindow","init","setTimeout","obj","populateInline","$sources","z","$source","populateSources","hasClass","xtToggle","elements","targets","min","html","less","js","lang","data","$codeInside","text","formatCode","replace","removeClass","hljs","highlightBlock","$clone","clone","match","remove","developerInit","developer","$target","contents","hide","show","h","outerHeight","height","$demo","$fullscreen","iframe","off","open","wrapInner","filter","$element","toLowerCase","is","last","scrollTop","$elements","href","top","offset","bottom","Infinity","not","$subs","$data","xtInitAll","xtAjax","ready","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":[";( function($, window, document, undefined) {\r\n  \r\n  'use strict';\r\n  \r\n  var main = function($main) {\r\n    \r\n    //////////////////////\r\n    // demo\r\n    //////////////////////\r\n    \r\n    window.resizeIframe = function(id) {\r\n      var $iframe = $('#' + id);\r\n      var $target = $iframe.contents().find('#body-inside');\r\n      $target.hide().show(0); // fix scrollbars disappearing\r\n      var h = $target.outerHeight();\r\n      if (h !== $iframe.data('iframeHeight')) {\r\n        $iframe.height(h);\r\n        $iframe.data('iframeHeight', h);\r\n      }\r\n    };\r\n    \r\n    // populateDemo\r\n    function populateDemo($container, i) {\r\n      var $items = $container.find('> .demo-item');\r\n      // multiple elements\r\n      $container.prepend('<div class=\"demo-tabs\"><div class=\"demo-tabs-inside\"><div class=\"demo-tabs-left float-left\"></div><div class=\"demo-tabs-right float-right\"></div></div></div>');\r\n      $container.find('.demo-tabs-right').append('<button type=\"button\" class=\"button button__fullscreen\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Open fullscreen\"><span class=\"icon-enlarge2\"></span></button>');\r\n      /*\r\n      $container.find('.button__fullscreen'))\r\n        .on('mouseleave', function(e) {\r\n          $(this).attr('data-original-title', 'Open fullscreen').tooltip('hide');\r\n        });\r\n      */\r\n      // single element and no demo tabs\r\n      if ($items.length === 1/* && !$items.hasClass('demo-preview') && !$items.attr('data-iframe')*/) {\r\n        $items.css('display', 'block');\r\n        $container.find('.demo-tabs').css('display', 'none');\r\n      }\r\n      $items.each( function(k) {\r\n        var $item = $(this);\r\n        // populate tabs\r\n        var name = $item.attr('data-name');\r\n        if ($items.length === 1) {\r\n          if (!$item.attr('data-name')) {\r\n            name = 'demo';\r\n          }\r\n        } else {\r\n          if (!$item.attr('data-name')) {\r\n            name = 'demo #' + k;\r\n          }\r\n        }\r\n        var $btn = $container.find('.demo-tabs-left').append('<button type=\"button\" class=\"button\">' + name + '</button>').find('.button').eq(k);\r\n        // iframe append\r\n        if ($item.attr('data-iframe')) {\r\n          $item.append('<iframe data-src=\"' + $item.attr('data-iframe') + '\" frameborder=\"0\"></iframe>');\r\n        }\r\n        // tabs\r\n        var id = 'iframe' + i + k;\r\n        $item.append('<div class=\"demo-code\"><div class=\"demo-code-tabs\"><div class=\"demo-code-tabs-inside\"><div class=\"demo-code-tabs-left float-left\"></div><div class=\"demo-code-tabs-right float-right\"><button type=\"button\" class=\"button button__clipboard\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Copy to clipboard\">copy</button></div></div></div><div class=\"demo-code-body\"></div></div>');\r\n        // https://github.com/zenorocha/clipboard.js/\r\n        /*\r\n        $item.find('.button__clipboard').tooltip()\r\n          .on('mouseleave', function(e) {\r\n            $(this).attr('data-original-title', 'Copy to clipboard').tooltip('hide');\r\n          });\r\n        */\r\n        var clipboard = new Clipboard('.button__clipboard', {\r\n          target: function(trigger) {\r\n            return $(trigger).parents('.demo').find('.demo-item.active .demo-code-body-item.active .hljs')[0];\r\n          }\r\n        });\r\n        clipboard.on('success', function(e) {\r\n          e.clearSelection();\r\n          //$(e.trigger).attr('data-original-title', 'Done').tooltip('show');\r\n        });\r\n        clipboard.on('error', function(e) {\r\n          //$(e.trigger).attr('data-original-title', 'Error: copy manually').tooltip('show');\r\n        });\r\n        // inject iframe\r\n        if ($item.attr('data-iframe')) {\r\n          var $iframe = $item.find('> iframe');\r\n          var initIframe = function() {\r\n            if (!$iframe.attr('src')) {\r\n              $item.addClass('demo-iframe');\r\n              $iframe.attr('id', id);\r\n              $iframe.attr('src', $iframe.attr('data-src'));\r\n              $iframe.on('load', function(e){\r\n                populateIframe($item, $iframe, id);\r\n                window.resizeIframe(id);\r\n                $iframe[0].contentWindow.init();\r\n                // .populated fix scroll\r\n                setTimeout( function($item) {\r\n                  $item.addClass('populated');\r\n                }, 0, $item);\r\n              });\r\n            }\r\n          };\r\n          if (k === 0) {\r\n            initIframe();\r\n          }\r\n          // iframe resize on show\r\n          $item.on('on', function(e, obj) {\r\n            if (e.target === this) {\r\n              window.resizeIframe(id);\r\n              if (k !== 0) {\r\n                initIframe();\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          populateInline($item, id);\r\n          // .populated fix scroll\r\n          setTimeout( function($item) {\r\n            $item.addClass('populated');\r\n          }, 0, $item);\r\n        }\r\n      });\r\n    }\r\n    \r\n    // populateInline\r\n    function populateInline($item, id) {\r\n      var $sources = $item.find('> .demo-source');\r\n      $sources.each( function(z) {\r\n        var $source = $(this);\r\n        populateSources($item, $source, id, z);\r\n        if (!$item.hasClass('demo-preview')) {\r\n          $source.css('display', 'none');\r\n        }\r\n      });\r\n      $item.xtToggle({\"elements\": \".demo-code-tabs-left .button\", \"targets\": \".demo-code-body-item\", \"min\": 1});\r\n    }\r\n    \r\n    // populateIframe\r\n    function populateIframe($item, $iframe, id) {\r\n      var html = $('body #body-inside', $iframe[0].contentWindow.document).html();\r\n      var less = $('body less-style', $iframe[0].contentWindow.document).html();\r\n      var css = $('body style[scoped]', $iframe[0].contentWindow.document).html();\r\n      var js = $('body script', $iframe[0].contentWindow.document).html();\r\n      // inject code\r\n      if (html) {\r\n        $iframe.append('<div class=\"demo-source\" data-lang=\"html\">' + html + '</div>');\r\n      }\r\n      if (less) {\r\n        $iframe.append('<div class=\"demo-source\" data-lang=\"less\">' + less + '</div>');\r\n      }\r\n      if (js) {\r\n        $iframe.append('<div class=\"demo-source\" data-lang=\"js\">' + js + '</div>');\r\n      }\r\n      // populate\r\n      var $sources = $item.find('.demo-source');\r\n      $sources.each( function(z) {\r\n        var $source = $(this);\r\n        populateSources($item, $source, id, z);\r\n      });\r\n      $item.xtToggle({\"elements\": \".demo-code-tabs-left .button\", \"targets\": \".demo-code-body-item\", \"min\": 1});\r\n    }\r\n    \r\n    // populateSources\r\n    function populateSources($item, $source, id, z) {\r\n      var lang = $source.data('lang');\r\n      // populate tabs\r\n      var $codeInside = $item.find('.demo-code-body').append('<div class=\"demo-code-body-item\"><pre><code></code></pre></div>').find('.demo-code-body-item').eq(z).find('pre code');\r\n      var $btnInside = $item.find('.demo-code-tabs-left').append('<button type=\"button\" class=\"button\">' + lang + '</button>').find('.button').eq(z);\r\n      // format code\r\n      if (!$codeInside.hasClass('hljs')) {\r\n        var text = formatCode($source, lang);\r\n        text = text.replace(/^\\s+|\\s+$/g, ''); // remove newline at start and end\r\n        $codeInside.html(text).removeClass().addClass(lang);\r\n        window.hljs.highlightBlock($codeInside[0]);\r\n      }\r\n    }\r\n    \r\n    // formatCode\r\n    function formatCode($source, lang) {\r\n      var $clone = $source.clone();\r\n      var text = $clone.html();\r\n      if (lang === 'css' || lang === 'js') {\r\n        text = text.replace(/<[^>]*>/g, '');\r\n      }\r\n      if (text.match(/[&<>]/g)) {\r\n        // replace entities\r\n        text = text.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g, '>');\r\n        // replace json quotes\r\n        text = text.replace(/(\"{)/g, '\\'{').replace(/(}\")/g, '}\\'');\r\n        // replace quote entities \r\n        text = text.replace(/&quot;:/g, '&quot;:'); // add spacing for white-space: pre-wrap;\r\n        text = text.replace(/&quot;/g, '\"');\r\n        // replace empty quotes\r\n        text = text.replace(/=\"\"/g, '');\r\n      }\r\n      text = $clone.text(text).html();\r\n      $clone.remove();\r\n      return text;\r\n    }\r\n    \r\n    // init demo\r\n    $main.find('.demo').each( function(i) {\r\n      var $demo = $(this);\r\n      populateDemo($demo, i);\r\n      // enable fullscreen\r\n      $demo.find('.demo-tabs-left .button').on('on', function(e, obj) {\r\n        var $fullscreen = $(this).parents('.demo').find('.button__fullscreen');\r\n        var iframe = $(this).parents('.demo').find('.demo-item.active').attr('data-iframe');\r\n        if (iframe) {\r\n          $fullscreen.css('display', 'block');\r\n          $fullscreen.off('click');\r\n          $fullscreen.on('click', function() {\r\n            window.open(iframe, '_blank');\r\n          });\r\n        }\r\n      });\r\n      // demo tabs\r\n      $demo.xtToggle({\"elements\":\".demo-tabs-left .button\", \"targets\": \".demo-item\", \"min\": 1});\r\n    });\r\n    \r\n    //////////////////////\r\n    // others\r\n    //////////////////////\r\n\r\n    // syntax\r\n    $main.find('pre code').each( function(i) {\r\n      window.hljs.highlightBlock(this);\r\n    });\r\n    \r\n    // .site-article .make-line\r\n    $main.find('.site-article').find('> h2, > h3').addClass('make-line');\r\n    $main.find('.make-line').wrapInner('<span class=\"line\"></span>').wrapInner('<div class=\"line-container\"></div>');\r\n    \r\n    // .site-article .site-article-anchor\r\n    $main.find('.site-article').find('> h2, > h3').filter(':parents(.demo)').each( function(i) {\r\n      var $element = $(this);\r\n      var id = $element.text().replace(/\\s+/g, '-').toLowerCase();\r\n      $element.attr('id', id);\r\n      $element.wrapInner('<a href=\"#' + id + '\"></a>');\r\n      $element.addClass('make-anchor').append('<span class=\"site-article-anchor\"><div class=\"button\"><span class=\"icon-link\" aria-hidden=\"true\"></span></div></span>');\r\n    });\r\n    \r\n    // tooltips\r\n    //$main.find('[data-toggle=\"tooltip\"]').tooltip(/*{trigger: 'click'}*/);\r\n    \r\n    // .site-aside-text\r\n    $main.find('.site-aside-text > .button:not(.different)').each( function(i) {\r\n      var $container = $(this).parents('.site-aside-text');\r\n      $main.find('.site-article').find('> h2, > h3').each( function(z) {\r\n        var $element = $(this);\r\n        if ($(this).is('h2')) {\r\n          $container.append($('<a href=\"#' + $(this).attr('id') + '\" class=\"button site-aside-sub\">' + $(this).text() + '</a><div class=\"site-aside-subsub\"></div>'));\r\n        } else if ($(this).is('h3')) {\r\n          $container.find('.site-aside-subsub').last().append($('<a href=\"#' + $(this).attr('id') + '\" class=\"button\">' + $(this).text() + '</a>'));\r\n        }\r\n      });\r\n    });\r\n    $(window).off('scroll.aside').on('scroll.aside', function() {\r\n      var scrollTop = $(this).scrollTop() + 60;\r\n      var $elements = $('.button.site-aside-sub').filter(':parents(.xt-ignore)');\r\n      $elements.each( function(i) {\r\n        var $element = $(this);\r\n        var href = $(this).attr('href');\r\n        if (href) {\r\n          var $target = $(href);\r\n          var top = $target.offset().top;\r\n          var bottom = Infinity;\r\n          if (scrollTop >= top && scrollTop < bottom) {\r\n            if (!$element.hasClass('active')) {\r\n              $elements.not($element).removeClass('active');\r\n              $element.addClass('active');\r\n            }\r\n          } else {\r\n            if ($element.hasClass('active')) {\r\n              $element.removeClass('active');\r\n            }\r\n          }\r\n        }\r\n      });\r\n      var $subs = $('.button.site-aside-sub.active + .site-aside-subsub .button').filter(':parents(.xt-ignore)');\r\n      $subs.each( function(i) {\r\n        var $element = $(this);\r\n        var href = $(this).attr('href');\r\n        if (href) {\r\n          var $target = $(href);\r\n          var top = $target.offset().top;\r\n          var bottom = Infinity;\r\n          if (scrollTop >= top && scrollTop <= bottom) {\r\n            if (!$element.hasClass('active')) {\r\n              $subs.not($element).removeClass('active');\r\n              $element.addClass('active');\r\n            }\r\n          } else {\r\n            if ($element.hasClass('active')) {\r\n              $element.removeClass('active');\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n    \r\n    //////////////////////\r\n    // developer\r\n    //////////////////////\r\n    \r\n    window.developer = false;\r\n    function developerInit() {\r\n      // state\r\n      if (window.developer) {\r\n        $('.button__developer').addClass('active');\r\n        $('.developer').addClass('developer-show');\r\n      }\r\n      // init\r\n      $('.button__developer').xtToggle().on('on', function(e) {\r\n        window.developer = true;\r\n        $('.developer').addClass('developer-show');\r\n      }).on('off', function(e) {\r\n        window.developer = false;\r\n        $('.developer').removeClass('developer-show');\r\n      });\r\n    }\r\n    $main.find('.site-wrapper').on('ajax.populated.xt', function(e, obj, $data) {\r\n      developerInit();\r\n    });\r\n    developerInit();\r\n    \r\n  };\r\n  \r\n  // init main\r\n  \r\n  main($('body'));\r\n  \r\n  //////////////////////\r\n  // xtend\r\n  //////////////////////\r\n  \r\n  // init xt\r\n  $('body').xtInitAll(true);\r\n  $('body').xtAjax({'elements': 'a[href^=\"/\"]', 'targets': '.site-wrapper'});\r\n  \r\n  // xt-ajax\r\n  $('.site-wrapper').on('ajax.populated.xt', function(e, obj, $data) {\r\n    // custom function on ajax\r\n    main($(this));\r\n  });\r\n  \r\n  /*\r\n  // test ajax stop page from changing\r\n  function unloadPage(){\r\n   return false;\r\n  }\r\n  window.onbeforeunload = unloadPage;\r\n  */\r\n  /*\r\n  $('.button__menu').filter(':parents(.xt-ignore)').on('on', function(e, obj) {\r\n    console.log(triggered, $('.button__menu').filter(':parents(.xt-ignore)').length, $('.button__menu').filter(':parents(.xt-ignore)').not(this).length);\r\n    if (!triggered && e.target === this) {\r\n      $('.button__menu').filter(':parents(.xt-ignore)').not(this).trigger('on.xt', [true, true]);\r\n    }\r\n  });\r\n  */\r\n  /*\r\n  $('.button__menu').on('off', function(e) {\r\n    $('.button__menu').not(this).trigger('off', [true]);\r\n  });\r\n  */\r\n  \r\n  /*\r\n  // tests\r\n  $('button').on('on', function(e, obj, $data) {\r\n    console.log($(this));\r\n  });\r\n  */\r\n  // tests\r\n  $(document).ready( function() {\r\n    //$('.site-breadcrumbs-body-main').trigger('on.xt');\r\n    //$('a[href=\"/\"]').filter(':parents(.xt-ignore)').trigger('on.xt');\r\n    //if ($('html').atr('id') === 'test-0.html') { console.log(this.settings); }\r\n    //$('.demo-item').on('on', function(e, obj) { console.log($(e.target)); });\r\n  });\r\n  \r\n  \r\n})(jQuery, window, document);"]}